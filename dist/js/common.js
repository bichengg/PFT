"use strict";var app=angular.module("app",["ngAnimate","ngCookies","ngResource","ngStorage","ui.router","ui.bootstrap","ui.load","ui.jq","ui.validate","oc.lazyLoad"]);app.config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(e,a,n,r){app.controller=e.register,app.directive=a.directive,app.filter=n.register,app.factory=r.factory,app.service=r.service,app.constant=r.constant,app.value=r.value}]).config(["$httpProvider",function(e){e.defaults.transformRequest=function(e){var a=[];for(var n in e)a.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return a.join("&")},e.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"}}]),app.constant("JQ_CONFIG",{easyPieChart:["vendor/jquery/charts/easypiechart/jquery.easy-pie-chart.js"],sparkline:["vendor/jquery/charts/sparkline/jquery.sparkline.min.js"],plot:["vendor/jquery/charts/flot/jquery.flot.min.js","vendor/jquery/charts/flot/jquery.flot.resize.js","vendor/jquery/charts/flot/jquery.flot.tooltip.min.js","vendor/jquery/charts/flot/jquery.flot.spline.js","vendor/jquery/charts/flot/jquery.flot.orderBars.js","vendor/jquery/charts/flot/jquery.flot.pie.min.js"],slimScroll:["../../lib/jquery-slimscroll/jquery.slimscroll.min.js"],sortable:["vendor/jquery/sortable/jquery.sortable.js"],nestable:["vendor/jquery/nestable/jquery.nestable.js","vendor/jquery/nestable/nestable.css"],filestyle:["vendor/jquery/file/bootstrap-filestyle.min.js"],slider:["vendor/jquery/slider/bootstrap-slider.js","vendor/jquery/slider/slider.css"],chosen:["vendor/jquery/chosen/chosen.jquery.min.js","vendor/jquery/chosen/chosen.css"],TouchSpin:["vendor/jquery/spinner/jquery.bootstrap-touchspin.min.js","vendor/jquery/spinner/jquery.bootstrap-touchspin.css"],wysiwyg:["vendor/jquery/wysiwyg/bootstrap-wysiwyg.js","vendor/jquery/wysiwyg/jquery.hotkeys.js"],dataTable:["vendor/jquery/datatables/jquery.dataTables.min.js","vendor/jquery/datatables/dataTables.bootstrap.js","vendor/jquery/datatables/dataTables.bootstrap.css"],vectorMap:["vendor/jquery/jvectormap/jquery-jvectormap.min.js","vendor/jquery/jvectormap/jquery-jvectormap-world-mill-en.js","vendor/jquery/jvectormap/jquery-jvectormap-us-aea-en.js","vendor/jquery/jvectormap/jquery-jvectormap.css"],footable:["vendor/jquery/footable/footable.all.min.js","vendor/jquery/footable/footable.core.css"]}).config(["$ocLazyLoadProvider",function(e){e.config({debug:!1,events:!0,modules:[{name:"ngGrid",files:["vendor/modules/ng-grid/ng-grid.min.js","vendor/modules/ng-grid/ng-grid.min.css","vendor/modules/ng-grid/theme.css"]},{name:"ui.select",files:["vendor/modules/angular-ui-select/select.min.js","vendor/modules/angular-ui-select/select.min.css"]},{name:"angularFileUpload",files:["vendor/modules/angular-file-upload/angular-file-upload.min.js"]},{name:"ui.calendar",files:["vendor/modules/angular-ui-calendar/calendar.js"]},{name:"ngImgCrop",files:["vendor/modules/ngImgCrop/ng-img-crop.js","vendor/modules/ngImgCrop/ng-img-crop.css"]},{name:"angularBootstrapNavTree",files:["libs/angular-bootstrap-nav-tree/abn_tree_directive.js","libs/angular-bootstrap-nav-tree/abn_tree.css"]},{name:"toaster",files:["libs/angularjs-toaster/toaster.js","libs/angularjs-toaster/toaster.css"]},{name:"textAngular",files:["vendor/modules/textAngular/textAngular-sanitize.min.js","vendor/modules/textAngular/textAngular.min.js"]},{name:"vr.directives.slider",files:["vendor/modules/angular-slider/angular-slider.min.js","vendor/modules/angular-slider/angular-slider.css"]},{name:"com.2fdevs.videogular",files:["vendor/modules/videogular/videogular.min.js"]},{name:"com.2fdevs.videogular.plugins.controls",files:["vendor/modules/videogular/plugins/controls.min.js"]},{name:"com.2fdevs.videogular.plugins.buffering",files:["vendor/modules/videogular/plugins/buffering.min.js"]},{name:"com.2fdevs.videogular.plugins.overlayplay",files:["vendor/modules/videogular/plugins/overlay-play.min.js"]},{name:"com.2fdevs.videogular.plugins.poster",files:["vendor/modules/videogular/plugins/poster.min.js"]},{name:"com.2fdevs.videogular.plugins.imaads",files:["vendor/modules/videogular/plugins/ima-ads.min.js"]},{name:"ngEcharts",files:["vendor/modules/ng-echarts/echarts.min.js"]},{name:"ngAmap",files:["vendor/modules/ng-amap/amap.js","http://webapi.amap.com/maps?v=1.3&key=471ac3e24922c1ef15c0f61fdd0af0e1"]}]})}]),app.run(["$rootScope","$state","$stateParams",function(e,a,n){e.$state=a,e.$stateParams=n}]).config(["$stateProvider","$urlRouterProvider",function(e,a){a.otherwise("/app/manage/teacher"),e.state("app",{abstract:!0,url:"/app",templateUrl:"tpl/app.html",resolve:{deps:["$ocLazyLoad",function(e){return e.load("toaster")}]}}).state("app.manage",{abstract:!0,url:"/manage",template:'<div ui-view class="fade-in-left h-full"></div>'}).state("app.manage.teacher",{url:"/teacher",templateUrl:"tpl/manage/teacher/list.html",controller:"TeacherCtrl",resolve:{deps:["$ocLazyLoad",function(e){return e.load(["src/js/controllers/app/manage/teacher.js"])}]}}).state("app.manage.score",{url:"/score",templateUrl:"tpl/manage/score/list.html",controller:"ScoreCtrl",resolve:{deps:["$ocLazyLoad",function(e){return e.load(["src/js/controllers/app/manage/score.js"])}]}})}]),app.run(["$rootScope",function(e){e.app={name:"学生体测管理",version:"1.0.0",nav:[],baseurl:"http://127.0.0.1/PFT/api/Public/PhysicalFitnessTest/",token:"167ab0a0-d8b0-3333-8a83-94de807c8dff",settings:{themeID:1,navbarHeaderColor:"bg-black",navbarCollapseColor:"bg-white-only",asideColor:"bg-black",headerFixed:!0,asideFixed:!1,asideFolded:!1,asideDock:!1,container:!1}}}]).controller("AppCtrl",["$scope","$localStorage","$window",function(e,a,n,r){e.nav=[{key:"manage",name:"管理平台",icon:"fa-cubes",child:[{key:"teacher",name:"教师管理"},{key:"student",name:"任务导入"},{key:"distribution",name:"任务分配"},{key:"progress",name:"进度查询"},{key:"score",name:"全校成绩导出"},{key:"clear",name:"系统清理"}]}],e.statusList=[{key:"有成绩",val:0},{key:"有备注",val:1},{key:"无结果",val:2}]}]),app.factory("Chats",function(){var e=[{id:0,name:"毕诚",lastText:"You on your way?",face:"http://www.angularui.cn/bbs/uploads/avatar/2/02/2_big.png"},{id:1,name:"毕诚",lastText:"Hey, it's me",face:"http://www.angularui.cn/bbs/uploads/avatar/2/02/2_big.png"}];return{all:function(){return e},remove:function(a){e.splice(e.indexOf(a),1)},get:function(a){for(var n=0;n<e.length;n++)if(e[n].id===parseInt(a))return e[n];return null}}}),angular.module("ui.load",[]).service("uiLoad",["$document","$q","$timeout",function(e,a,n){var r=[],t=!1,o=a.defer();this.load=function(e){e=angular.isArray(e)?e:e.split(/\s+/);var a=this;return t||(t=o.promise),angular.forEach(e,function(e){t=t.then(function(){return e.indexOf(".css")>=0?a.loadCSS(e):a.loadScript(e)})}),o.resolve(),t},this.loadScript=function(t){if(r[t])return r[t].promise;var o=a.defer(),i=e[0].createElement("script");return i.src=t,i.onload=function(e){n(function(){o.resolve(e)})},i.onerror=function(e){n(function(){o.reject(e)})},e[0].body.appendChild(i),r[t]=o,o.promise},this.loadCSS=function(t){if(r[t])return r[t].promise;var o=a.defer(),i=e[0].createElement("link");return i.rel="stylesheet",i.type="text/css",i.href=t,i.onload=function(e){n(function(){o.resolve(e)})},i.onerror=function(e){n(function(){o.reject(e)})},e[0].head.appendChild(i),r[t]=o,o.promise}}]),angular.module("app").directive("setNgAnimate",["$animate",function(e){return{link:function(a,n,r){a.$watch(function(){return a.$eval(r.setNgAnimate,a)},function(a,r){e.enabled(!!a,n)})}}}]),angular.module("app").directive("uiButterbar",["$rootScope","$anchorScroll",function(e,a){return{restrict:"AC",template:'<span class="bar"></span>',link:function(e,n,r){n.addClass("butterbar hide"),e.$on("$stateChangeStart",function(e){a(),n.removeClass("hide").addClass("active")}),e.$on("$stateChangeSuccess",function(e,a,r,t){e.targetScope.$watch("$viewContentLoaded",function(){n.addClass("hide").removeClass("active")})})}}}]),angular.module("app").directive("uiFocus",function(e,a){return{link:function(n,r,t){var o=a(t.uiFocus);n.$watch(o,function(a){!0===a&&e(function(){r[0].focus()})}),r.bind("blur",function(){n.$apply(o.assign(n,!1))})}}}),angular.module("app").directive("uiFullscreen",["uiLoad","$document","$window",function(e,a,n){return{restrict:"AC",template:'<i class="fa fa-expand fa-fw text"></i><i class="fa fa-compress fa-fw text-active"></i>',link:function(n,r,t){r.addClass("hide"),e.load("../../lib/screenfull/screenfull.min.js").then(function(){screenfull.enabled&&!navigator.userAgent.match(/Trident.*rv:11\./)&&r.removeClass("hide"),r.on("click",function(){var e;t.target&&(e=$(t.target)[0]),screenfull.toggle(e)}),a.on(screenfull.raw.fullscreenchange,function(){screenfull.isFullscreen?r.addClass("active"):r.removeClass("active")})})}}}]),angular.module("ui.jq",["ui.load"]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","JQ_CONFIG","uiLoad","$timeout",function(e,a,n,r){return{restrict:"A",compile:function(t,o){if(!angular.isFunction(t[o.uiJq])&&!a[o.uiJq])throw new Error('ui-jq: The "'+o.uiJq+'" function does not exist');var i=e&&e[o.uiJq];return function(e,t,o){function s(){var a=[];return o.uiOptions?(a=e.$eval("["+o.uiOptions+"]"),angular.isObject(i)&&angular.isObject(a[0])&&(a[0]=angular.extend({},i,a[0]))):i&&(a=[i]),a}function l(){r(function(){t[o.uiJq].apply(t,s())},0,!1)}function u(){o.uiRefresh&&e.$watch(o.uiRefresh,function(){l()})}o.ngModel&&t.is("select,input,textarea")&&t.bind("change",function(){t.trigger("input")}),a[o.uiJq]?n.load(a[o.uiJq]).then(function(){l(),u()}).catch(function(){}):(l(),u())}}}}]),angular.module("app").directive("uiModule",["MODULE_CONFIG","uiLoad","$compile",function(e,a,n){return{restrict:"A",compile:function(r,t){var o=r.contents().clone();return function(r,t,i){t.contents().remove(),a.load(e[i.uiModule]).then(function(){n(o)(r,function(e,a){t.append(e)})})}}}}]),angular.module("app").directive("uiNav",["$timeout",function(e){return{restrict:"AC",link:function(e,a,n){var r,t=$(window),o=$(".app-aside");a.on("click","a",function(e){r&&r.trigger("mouseleave.nav");var a=$(this);a.parent().siblings(".active").toggleClass("active"),a.next().is("ul")&&a.parent().toggleClass("active")&&e.preventDefault(),a.next().is("ul")||t.width()<768&&$(".app-aside").removeClass("show off-screen")}),a.on("mouseenter","a",function(e){if(r&&r.trigger("mouseleave.nav"),$("> .nav",o).remove(),!(!$(".app-aside-fixed.app-aside-folded").length||t.width()<768||$(".app-aside-dock").length)){var a,n=$(e.target),i=$(window).height();!n.is("a")&&(n=n.closest("a")),n.next().is("ul")&&(r=n.next(),n.parent().addClass("active"),a=n.parent().position().top+50,r.css("top",a),a+r.height()>i&&r.css("bottom",0),a+150>i&&r.css("bottom",i-a-50).css("top","auto"),r.appendTo(o),r.on("mouseleave.nav",function(e){$(".dropdown-backdrop").remove(),r.appendTo(n.parent()),r.off("mouseleave.nav").css("top","auto").css("bottom","auto"),n.parent().removeClass("active")}),$(".smart").length&&$('<div class="dropdown-backdrop"/>').insertAfter(".app-aside").on("click",function(e){e&&e.trigger("mouseleave.nav")}))}}),o.on("mouseleave",function(e){r&&r.trigger("mouseleave.nav"),$("> .nav",o).remove()})}}}]),angular.module("app").directive("uiScroll",["$location","$anchorScroll",function(e,a){return{restrict:"AC",link:function(n,r,t){r.on("click",function(n){e.hash(t.uiScroll),a()})}}}]),angular.module("app").directive("uiShift",["$timeout",function(e){return{restrict:"A",link:function(a,n,r){function t(){e(function(){var e=r.uiShift,a=r.target;s.hasClass("in")||s[e](a).addClass("in")})}function o(){i&&i.prepend(n),!i&&s.insertAfter(u),s.removeClass("in")}var i,s=$(n),l=$(window),u=s.prev(),c=l.width();!u.length&&(i=s.parent()),c<768&&t()||o(),l.resize(function(){c!==l.width()&&e(function(){l.width()<768&&t()||o(),c=l.width()})})}}}]),angular.module("app").directive("uiToggleClass",["$timeout","$document",function(e,a){return{restrict:"AC",link:function(e,a,n){a.on("click",function(e){function r(e,a){for(var n=new RegExp("\\s"+e.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g"),r=" "+$(a)[0].className+" ";n.test(r);)r=r.replace(n," ");$(a)[0].className=$.trim(r)}e.preventDefault();var t=n.uiToggleClass.split(","),o=n.target&&n.target.split(",")||Array(a),i=0;angular.forEach(t,function(e){var a=o[o.length&&i];-1!==e.indexOf("*")&&r(e,a),$(a).toggleClass(e),i++}),$(a).toggleClass("active")})}}}]),angular.module("ui.validate",[]).directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(e,a,n,r){var t,o={},i=e.$eval(n.uiValidate);i&&(angular.isString(i)&&(i={validator:i}),angular.forEach(i,function(a,n){t=function(t){var o=e.$eval(a,{$value:t});return angular.isObject(o)&&angular.isFunction(o.then)?(o.then(function(){r.$setValidity(n,!0)},function(){r.$setValidity(n,!1)}),t):o?(r.$setValidity(n,!0),t):(r.$setValidity(n,!1),t)},o[n]=t,r.$formatters.push(t),r.$parsers.push(t)}),n.uiValidateWatch&&function(a){angular.isString(a)?e.$watch(a,function(){angular.forEach(o,function(e){e(r.$modelValue)})}):angular.isArray(a)?angular.forEach(a,function(a){e.$watch(a,function(){angular.forEach(o,function(e){e(r.$modelValue)})})}):angular.isObject(a)&&angular.forEach(a,function(a,n){angular.isString(a)&&e.$watch(a,function(){o[n](r.$modelValue)}),angular.isArray(a)&&angular.forEach(a,function(a){e.$watch(a,function(){o[n](r.$modelValue)})})})}(e.$eval(n.uiValidateWatch)))}}});